/**
 * Any CSS included here will be global. The classic template
 * bundles Infima by default. Infima is a CSS framework designed to
 * work well for content-centric websites.
 */

/* You can override the default Infima variables here. */
@import './style/mobile.scss';
@import './style/light.scss';
@import './style/dark.scss';

:root {
  --ifm-color-primary: #2e8555;
  --ifm-color-primary-dark: #29784c;
  --ifm-color-primary-darker: #277148;
  --ifm-color-primary-darkest: #205d3b;
  --ifm-color-primary-light: #33925d;
  --ifm-color-primary-lighter: #359962;
  --ifm-color-primary-lightest: #3cad6e;
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgb(137 132 255 / 25%); // 代码高亮背景色
  --ifm-menu-link-sublist-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNDQ4IDUxMiI+PHBhdGggZD0iTTIwMS40IDEzNy40YzEyLjUtMTIuNSAzMi44LTEyLjUgNDUuMyAwbDE2MCAxNjBjMTIuNSAxMi41IDEyLjUgMzIuOCAwIDQ1LjNzLTMyLjggMTIuNS00NS4zIDBMMjI0IDIwNS4zIDg2LjYgMzQyLjZjLTEyLjUgMTIuNS0zMi44IDEyLjUtNDUuMyAwcy0xMi41LTMyLjggMC00NS4zbDE2MC0xNjB6Ii8+PC9zdmc+');
  --ifm-paragraph-margin-bottom: 0.1rem;
  --ifm-leading-desktop: 1;
  --ifm-table-cell-padding: 0.5rem; // table 间距

  --background-color: rgba(245, 247, 248, 0.5);
  --mobile-search-background: #f8f8f8;
  --code-error-color: rgb(248 60 72); // 代码错误高亮标识色
  --code-error-color-bg: rgb(255 164 164 / 60%); // 代码错误高亮背景色
  --highlighted-code-line-color: rgb(157 94 255); // 代码高亮色
  --menu-collapse-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHBhdGggZD0iTTQxLjQgMjMzLjRjLTEyLjUgMTIuNS0xMi41IDMyLjggMCA0NS4zbDE2MCAxNjBjMTIuNSAxMi41IDMyLjggMTIuNSA0NS4zIDBzMTIuNS0zMi44IDAtNDUuM0wxMDkuMyAyNTYgMjQ2LjYgMTE4LjZjMTIuNS0xMi41IDEyLjUtMzIuOCAwLTQ1LjNzLTMyLjgtMTIuNS00NS4zIDBsLTE2MCAxNjB6bTM1Mi0xNjBsLTE2MCAxNjBjLTEyLjUgMTIuNS0xMi41IDMyLjggMCA0NS4zbDE2MCAxNjBjMTIuNSAxMi41IDMyLjggMTIuNSA0NS4zIDBzMTIuNS0zMi44IDAtNDUuM0wzMDEuMyAyNTYgNDM4LjYgMTE4LjZjMTIuNS0xMi41IDEyLjUtMzIuOCAwLTQ1LjNzLTMyLjgtMTIuNS00NS4zIDB6Ii8+PC9zdmc+');
  --highlighted-background-color: #e9f5e7;
  --hash-link-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNjQwIDUxMiI+PHN0eWxlPnN2Z3tmaWxsOiMzNTk5NjJ9PC9zdHlsZT48cGF0aCBkPSJNNTc5LjggMjY3LjdjNTYuNS01Ni41IDU2LjUtMTQ4IDAtMjA0LjVjLTUwLTUwLTEyOC44LTU2LjUtMTg2LjMtMTUuNGwtMS42IDEuMWMtMTQuNCAxMC4zLTE3LjcgMzAuMy03LjQgNDQuNnMzMC4zIDE3LjcgNDQuNiA3LjRsMS42LTEuMWMzMi4xLTIyLjkgNzYtMTkuMyAxMDMuOCA4LjZjMzEuNSAzMS41IDMxLjUgODIuNSAwIDExNEw0MjIuMyAzMzQuOGMtMzEuNSAzMS41LTgyLjUgMzEuNS0xMTQgMGMtMjcuOS0yNy45LTMxLjUtNzEuOC04LjYtMTAzLjhsMS4xLTEuNmMxMC4zLTE0LjQgNi45LTM0LjQtNy40LTQ0LjZzLTM0LjQtNi45LTQ0LjYgNy40bC0xLjEgMS42QzIwNi41IDI1MS4yIDIxMyAzMzAgMjYzIDM4MGM1Ni41IDU2LjUgMTQ4IDU2LjUgMjA0LjUgMEw1NzkuOCAyNjcuN3pNNjAuMiAyNDQuM2MtNTYuNSA1Ni41LTU2LjUgMTQ4IDAgMjA0LjVjNTAgNTAgMTI4LjggNTYuNSAxODYuMyAxNS40bDEuNi0xLjFjMTQuNC0xMC4zIDE3LjctMzAuMyA3LjQtNDQuNnMtMzAuMy0xNy43LTQ0LjYtNy40bC0xLjYgMS4xYy0zMi4xIDIyLjktNzYgMTkuMy0xMDMuOC04LjZDNzQgMzcyIDc0IDMyMSAxMDUuNSAyODkuNUwyMTcuNyAxNzcuMmMzMS41LTMxLjUgODIuNS0zMS41IDExNCAwYzI3LjkgMjcuOSAzMS41IDcxLjggOC42IDEwMy45bC0xLjEgMS42Yy0xMC4zIDE0LjQtNi45IDM0LjQgNy40IDQ0LjZzMzQuNCA2LjkgNDQuNi03LjRsMS4xLTEuNkM0MzMuNSAyNjAuOCA0MjcgMTgyIDM3NyAxMzJjLTU2LjUtNTYuNS0xNDgtNTYuNS0yMDQuNSAwTDYwLjIgMjQ0LjN6Ii8+PC9zdmc+');
}

/* For readability concerns, you should choose a lighter palette in dark mode. */
[data-theme='dark'] {
  --ifm-color-primary: #25c2a0;
  --ifm-color-primary-dark: #21af90;
  --ifm-color-primary-darker: #1fa588;
  --ifm-color-primary-darkest: #1a8870;
  --ifm-color-primary-light: #29d5b0;
  --ifm-color-primary-lighter: #32d8b4;
  --ifm-color-primary-lightest: #4fddbf;
  --docusaurus-highlighted-code-line-bg: rgb(97 76 249 / 41%);

  --background-color: #18191c;
  --mobile-search-background: #454545;
  --code-error-color: rgb(248 83 83);
  --code-error-color-bg: rgba(195, 38, 38, 0.6);
  --highlighted-code-line-color: rgb(148 80 255);
  --highlighted-background-color: #153909;
  --hash-link-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNjQwIDUxMiI+PHN0eWxlPnN2Z3tmaWxsOiMxZmE1ODh9PC9zdHlsZT48cGF0aCBkPSJNNTc5LjggMjY3LjdjNTYuNS01Ni41IDU2LjUtMTQ4IDAtMjA0LjVjLTUwLTUwLTEyOC44LTU2LjUtMTg2LjMtMTUuNGwtMS42IDEuMWMtMTQuNCAxMC4zLTE3LjcgMzAuMy03LjQgNDQuNnMzMC4zIDE3LjcgNDQuNiA3LjRsMS42LTEuMWMzMi4xLTIyLjkgNzYtMTkuMyAxMDMuOCA4LjZjMzEuNSAzMS41IDMxLjUgODIuNSAwIDExNEw0MjIuMyAzMzQuOGMtMzEuNSAzMS41LTgyLjUgMzEuNS0xMTQgMGMtMjcuOS0yNy45LTMxLjUtNzEuOC04LjYtMTAzLjhsMS4xLTEuNmMxMC4zLTE0LjQgNi45LTM0LjQtNy40LTQ0LjZzLTM0LjQtNi45LTQ0LjYgNy40bC0xLjEgMS42QzIwNi41IDI1MS4yIDIxMyAzMzAgMjYzIDM4MGM1Ni41IDU2LjUgMTQ4IDU2LjUgMjA0LjUgMEw1NzkuOCAyNjcuN3pNNjAuMiAyNDQuM2MtNTYuNSA1Ni41LTU2LjUgMTQ4IDAgMjA0LjVjNTAgNTAgMTI4LjggNTYuNSAxODYuMyAxNS40bDEuNi0xLjFjMTQuNC0xMC4zIDE3LjctMzAuMyA3LjQtNDQuNnMtMzAuMy0xNy43LTQ0LjYtNy40bC0xLjYgMS4xYy0zMi4xIDIyLjktNzYgMTkuMy0xMDMuOC04LjZDNzQgMzcyIDc0IDMyMSAxMDUuNSAyODkuNUwyMTcuNyAxNzcuMmMzMS41LTMxLjUgODIuNS0zMS41IDExNCAwYzI3LjkgMjcuOSAzMS41IDcxLjggOC42IDEwMy45bC0xLjEgMS42Yy0xMC4zIDE0LjQtNi45IDM0LjQgNy40IDQ0LjZzMzQuNCA2LjkgNDQuNi03LjRsMS4xLTEuNkM0MzMuNSAyNjAuOCA0MjcgMTgyIDM3NyAxMzJjLTU2LjUtNTYuNS0xNDgtNTYuNS0yMDQuNSAwTDYwLjIgMjQ0LjN6Ii8+PC9zdmc+');
}

*::selection {
  background-color: rgba(#25c2a0, 0.4);
}
// 修改滚动条样式
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
}

::-webkit-scrollbar-track {
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: #fff;
}

// 隐藏滚动条
.hide-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
  &::-webkit-scrollbar {
    display: none; /* Chrome, MSEdge, Safari and Opera */
  }
}

// 自定义无头表格
.table__no-header {
  & + table {
    & > thead {
      display: none;
    }
  }
}

// 自定义无线表格
.table__no-border {
  & + table {
    & > thead {
      background-color: unset;
      tr {
        box-shadow: none;
      }
      :is(tr, th) {
        border-width: 0;
      }
    }
    & > tbody {
      :is(tr, td) {
        border-width: 0;
        background-color: unset;
      }
    }
  }
}

// 紧凑表格
.table__compact {
  & + table {
    :is(th, td) {
      padding: 0 4px;
    }
  }
}

table {
  & > thead {
    & > tr {
      border-bottom-width: 1px;
      box-shadow: 0 1px 2px 0 var(--ifm-table-border-color);
    }
  }
}

.code__link {
  font-family: var(--ifm-font-family-monospace);
}

// 代码块语言列表
$languages: (
  html: 'HTML',
  css: 'CSS',
  scss: 'SCSS',
  less: 'LESS',
  js: 'JS',
  jsdoc: 'JSDoc',
  jsx: 'JSX',
  ts: 'TS',
  tsx: 'TSX',
  txt: 'Text',
  bash: 'Bash',
  json: 'JSON',
  git: 'Git',
  nginx: 'Nginx',
  yml: 'YML',
  yaml: 'YAML',
  py: 'Python',
  python: 'Python',
  http: 'HTTP',
);

#__docusaurus {
  $img-border-radius: 6px;

  height: 100%;

  header {
    h1 {
      font-size: 2.5rem;
    }
  }
  h2.anchor {
    font-size: 2rem;
  }
  h3.anchor {
    font-size: 1.75rem;
  }
  h4.anchor {
    font-size: 1.5rem;
  }
  h5.anchor {
    font-size: 1.25rem;
  }
  h6.anchor {
    font-size: 1rem;
  }

  // 导航栏
  nav.navbar {
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      z-index: -1;
      backdrop-filter: blur(10px);
    }

    .navbar__items:not(.navbar__items--right) {
      .navbar__item.navbar__link {
        position: relative;

        &::after {
          content: '';
          display: flex;
          justify-content: center;
          margin: auto;
          width: 0;
          height: 4px;
          border-radius: 4px;
          background-color: transparent;
          transition: all 0.2s ease;
          position: relative;
          bottom: -4px;
        }
        &.navbar__link--active {
          &::after {
            width: 60%;
            background-color: var(--ifm-color-primary);
          }
        }
      }
    }
    // 搜索按钮
    .navbar__search-input {
      transition: all 0.2s ease;
      outline-width: 1px;
      outline-style: solid;
      &:focus {
        width: 250px;
        transition: all 0.2s ease;
        outline-width: 1px;
        outline-style: solid;
      }
    }
    span[role='listbox'] {
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);
    }
  }
  // 内容区
  .main-wrapper {
    .theme-admonition {
      border-width: 1px;
      & > div[class^='admonitionHeading_'] {
        font-size: 1rem; // title
      }
    }

    // 左侧
    aside.theme-doc-sidebar-container {
      min-height: 100vh;
      border-right: none;
      nav.menu {
        @extend .hide-scrollbar;
        & + button.button[class*='collapseSidebarButton'] {
          border: none;
          border-radius: 8px;
          margin: 0 20px 10px;

          &::after {
            content: ' ';
            display: inline-block;
            width: 1rem;
            height: 100%;
            background-image: var(--menu-collapse-icon);
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.6;
            filter: var(--ifm-menu-link-sublist-icon-filter);
          }

          & > svg {
            display: none;
          }
        }
        & > ul.menu__list {
          // 高亮样式
          li.menu__list-item {
            & > .menu__link.menu__link--active {
              background-color: var(--highlighted-background-color);
            }
          }
          // 文件夹高亮样式
          li.theme-doc-sidebar-item-category {
            & > .menu__list-item-collapsible.menu__list-item-collapsible--active {
              background-color: var(--highlighted-background-color);
            }
            button.clean-btn.menu__caret {
              padding-right: 4px;
              padding-left: 4px;
              &::before {
                opacity: 0.6;
                background-repeat: no-repeat;
                background-size: 1rem 1rem;
                background-position: center;
              }
            }
          }
        }
      }
      div[class^='expandButton'] {
        &::after {
          content: ' ';
          display: inline-block;
          width: 1rem;
          height: 100%;
          background-image: var(--menu-collapse-icon);
          background-size: 1rem 1rem;
          background-repeat: no-repeat;
          background-position: center;
          opacity: 0.6;
          transform: rotateY(180deg);
          filter: var(--ifm-menu-link-sublist-icon-filter);
        }

        & > svg {
          display: none;
        }
      }
    }

    main {
      ul.tabs {
        & > li.tabs__item {
          padding: 8px 12px 6px;
        }
      }
      .markdown {
        --ifm-h2-vertical-rhythm-top: 1.2; // h2 matgin-top
        // 行内代码块样式
        code:not([class*='codeBlockLines']) {
          padding-left: 4px;
          padding-right: 4px;
        }
        img {
          border-radius: $img-border-radius;
        }
        .theme-admonition {
          span[class^='admonitionIcon'] {
            transform: scale(0.8); // alert 图标大小
          }
        }
        .anchor {
          & > a.hash-link {
            &::before {
              display: inline-flex;
              color: transparent;
              background-image: var(--hash-link-icon);
              background-size: 100% 100%;
              background-repeat: no-repeat;
              background-position: center;
              opacity: 1;
              transform: rotateZ(75deg);
            }
            &:hover {
              text-decoration: none !important;
            }
          }
        }
      }
      .theme-code-block {
        position: relative;
        padding-top: 4px;
        margin-top: 24px;
        box-shadow: none;
        &::after {
          content: ' ';
          position: absolute;
          font-family: SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
            monospace;
          box-shadow: 0 2px 6px 0 rgba(100 114 255 / 20%);
          top: -12px;
          left: 20px;
          min-width: 50px;
          background-color: rgb(100 114 255);
          border-radius: 4px;
          padding: 0 4px;
          color: #fff;
          text-align: center;
          opacity: 0;
          transition: all 0.5s ease;
        }
        transition: all 0.2s ease-out;
        &:hover {
          &::after {
            opacity: 1;
          }
        }
        @each $lang, $langText in $languages {
          &.language-#{$lang} {
            &::after {
              content: $langText;
            }
          }
        }
        pre.prism-code {
          & > code[class*='codeBlockLines_'] {
            // 错误代码高亮
            & > .token-line.code__error {
              background-color: var(--code-error-color-bg);
              position: relative;
            }
          }
          // 没有行号的代码
          & > code:not([class*='codeBlockLinesWithNumbering_']) {
            & > .token-line.code__error {
              display: block;
              margin-left: -16px;
              margin-right: -16px;
              padding-left: 16px;
              padding-right: 16px;
            }
          }
        }
      }
    }

    // 排除博客
    main:not([itemscope]) {
      // 面包屑
      // nav.theme-doc-breadcrumbs {
      //   position: sticky;
      //   top: 0;
      //   padding: 10px 6px;
      //   z-index: 1;
      //   backdrop-filter: blur(10px);
      //   margin-left: -10px;
      //   margin-right: -20px;
      // }
      article {
        a.card {
          border: none;
          transition: all 0.2s ease;
          &:hover {
            transition: all 0.2s ease;
            transform: translateY(-2px);
          }
        }

        .theme-doc-markdown.markdown {
          img {
            border-radius: $img-border-radius;
          }
        }

        @media screen and (min-width: 997px) {
          //大标题
          // .theme-doc-markdown.markdown {
          //   :is(h2, h3, h4, h5, h6).anchor {
          //     position: relative;
          //     padding-left: 0;
          //     display: flex;
          //     transition: padding 0.3s ease;
          //     transition-delay: 0.1s;
          //     // 控制锚点滚动到顶部的距离
          //     // padding-top: 50px;
          //     // margin-top: -50px;

          //     a.hash-link {
          //       transition: all 0.3s ease;
          //       transition-delay: 0.1s;
          //       position: absolute;
          //       left: -30px;
          //     }
          //     &:hover {
          //       padding-left: 40px;
          //       a.hash-link {
          //         left: 0;
          //       }
          //     }
          //   }
          // }
        }
      }

      // 右侧导航目录
      .theme-doc-toc-desktop {
        @extend .hide-scrollbar;
        ul.table-of-contents {
          overflow-x: visible;
          margin-left: 4px;
          // border-left-color: #dadde155;

          & > li > a {
            font-weight: 500; // 调整 h1 字重
          }
          a.toc-highlight {
            display: flex;
            align-items: center;
            white-space: pre-wrap;
            word-break: break-word;
            flex-wrap: wrap;
            &.table-of-contents__link--active {
              &::before {
                content: '';
                position: absolute;
                left: 0;
                transform: translateX(2.5px);
                width: 4px;
                height: 20px;
                border-radius: 2px;
                background-color: var(--ifm-color-primary);
                transition: all 0.2s ease;
              }
            }
          }
        }
      }
    }

    // 博客
    // main[itemscope] {
    // & > article[itemprop='blogPost'] {
    //   :is(h2, h3, h4, h5, h6).anchor {
    //     margin-top: -60px;
    //     padding-top: 60px;
    //   }
    // }
    // }

    // 上/下一个导航
    .pagination-nav {
      .pagination-nav__link {
        border: none;
        transition: all 0.2s ease;
        &:hover {
          transition: all 0.2s ease;
          transform: translateY(-2px);
        }

        &--prev {
          .pagination-nav__label {
            &::before {
              content: '← ';
            }
          }
        }
        &--next {
          .pagination-nav__label {
            &::after {
              content: ' →';
            }
          }
        }
      }
    }

    // 全屏搜索
    input[type='search'][class^='searchQueryInput'] {
      border-radius: 6px;
      outline: none;
      transition: all 0.2s ease;
      border: 1px solid transparent;
      &:focus {
        border-color: var(--ifm-color-primary);
      }
    }
  }
}

@media screen and (min-width: 997px) {
  #__docusaurus {
    .main-wrapper {
      main:not([itemscope]) {
        border-top-left-radius: 10px;
      }
      // 返回顶部按钮
      button.theme-back-to-top-button {
        right: 10rem;
        bottom: 4rem;
        &:hover {
          transform: scale(1.2);
        }
      }
    }
  }
}
