---
title: 内网穿透实现远程 SSH 连接
tags:
  - 内网穿透
  - SSH
  - 小米球
  - ngrok
---

<Author cost={2} publish="2023-10-22 20:50" />

需要借助三方工具：如 `ngrok`，这里用的是 `xiaomiqiu` (基于 `ngrok` 1.7 修改的)

## 注册账户

需要注册小米球账户，并实名认证。完成后会生成唯一的 `token`，可在【系统管理>账户管理>我的账户】中查看。

## 创建隧道

注册版（免费版）可以创建 `http/https/tcp` 隧道各一个。

### 隧道配置说明

| 主要配置项   |           值参考           | 说明                                 |
| ------------ | :------------------------: | ------------------------------------ |
| 协议         | `TCP` `UDP` `HTTP` `HTTPS` | `SSH` 需要使用 `TCP` 协议            |
| 自定义域名   |                            | 如果自己有已备案的公网域名，可以设定 |
| 映射端口     |                            | 系统自动分配，不可修改               |
| 本地服务地址 |       `127.0.0.1:22`       | 因为这里想要映射的是 `22` 号端口     |

## 下载 xiaomiqiu

下载操作系统对应版本。

## 配置

最简单的配置只需要将生成的 `token` 替换掉即可，会自动拉取网站中的隧道配置。配置完成之后使用自动化脚本启动即可(`Windows` 下的 `.bat` 文件，`Linux/Mac` 下的 `.sh` 文件)

## 远程连接

```bash
ssh -p 36670 root@ngrok.xiaomiqiu123.top
# 提示指纹未知，是否继续连接 -> 输入 yes 继续
# 提示输入 root 账户密码 -> 输入密码（不可见）
# 连接成功
# root@deepinPC:~#
```
