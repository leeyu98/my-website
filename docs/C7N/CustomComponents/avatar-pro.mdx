---
title: AvatarPro
description: åŸºäº Avatar ç»„ä»¶å°è£…çš„å¤´åƒç»„ä»¶ã€‚
sidebar_position: 10
tags: [å¤´åƒ, AvatarPro]
keywords: [å¤´åƒ, AvatarPro]
---

åŸºäº `Avatar` ç»„ä»¶å°è£…çš„å¤´åƒç»„ä»¶ã€‚

![åŸºæœ¬ç”¨æ³•](./images/avatar-pro.png)

## ç‰¹æ€§è¯´æ˜

- æ”¯æŒæ–‡å­—å¤šå½©æ¨¡å¼
- ä¿®å¤é»˜è®¤çš„ `Avatar` ç»„ä»¶ç¼©æ”¾æ¯”ä¾‹å¯¼è‡´çš„æ–‡å­—å€’ç½®é—®é¢˜
- æ”¯æŒ `AvatarProps` æ‰€æœ‰å±æ€§

## ä½•æ—¶ä½¿ç”¨

- å¦‚æœé‡åˆ°äº†æ–‡å­—å¤´åƒå€’ç½®çš„é—®é¢˜ (å·²çŸ¥åœ¨å¼¹çª—ä¸­ä½¿ç”¨ `List` ç»„ä»¶ä¼šå‡ºç°æ­¤é—®é¢˜)
- å¦‚æœéœ€è¦ç”¨åˆ°å¤šè‰²æ–‡å­—å¤´åƒ

> å…¶ä»–åªæ˜¯ `Avatar` çš„ç®€å•åº”ç”¨å¹¶èƒ½å®ç°æ•ˆæœæ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨è¯¥ç»„ä»¶

## åŸºæœ¬ç”¨æ³•

```jsx showLineNumbers
import { AvatarPro } from 'hscs-common/components';

export default () => {
  return (
    <>
      <AvatarPro colorful shape="square" size={48}>
        ä½ å¥½
      </AvatarPro>
      <AvatarPro size={48}>ä½ å¥½</AvatarPro>
      <AvatarPro colorful size={48}>
        ä½ å¥½
      </AvatarPro>
      <AvatarPro colorful size={48}>
        Hello
      </AvatarPro>
      <AvatarPro colorful size={48}>
        ì•ˆë…•
      </AvatarPro>
      <AvatarPro colorful size={48}>
        ã“ã‚“ã«ã¡ã¯
      </AvatarPro>
      <AvatarPro colorful size={48}>
        <span role="img" aria-label="smile">
          ğŸ˜„
        </span>
      </AvatarPro>
      <AvatarPro colorful size={48}>
        <span role="img" aria-label="imac">
          ğŸ–¥ï¸
        </span>
      </AvatarPro>
    </>
  );
};
```

## å¤´åƒç»„

> ç”±äº `Group` å†…éƒ¨å¤´åƒè®¡æ•°ç”¨åˆ°çš„ç»„ä»¶æ˜¯åŸå§‹çš„ `Avatar`ï¼Œæ‰€ä»¥ä¹Ÿå­˜åœ¨å€’ç½®é—®é¢˜ï¼Œå»ºè®®è‡ªå®šä¹‰å®ç° `Group` åŠŸèƒ½ã€‚

```tsx
import { Avatar } from 'choerodon-ui';
import { AvatarPro } from '@/components';

export default () => {
  return (
    <Avatar.Group maxCount={2} size={28} maxStyle={{ fontSize: 16 }}>
      <AvatarPro colorful size={28} style={{ fontSize: 16 }}>
        é•¿å¿µ
      </AvatarPro>
      <AvatarPro colorful size={28} style={{ fontSize: 16 }}>
        é•¿å¿µçš„å°ç«™
      </AvatarPro>
      <AvatarPro colorful size={28} style={{ fontSize: 16 }}>
        ChangNian
      </AvatarPro>
    </Avatar.Group>
  );
};
```

## API

> é™¤æ­¤ä»¥ä¸‹é™„åŠ å±æ€§å¤–ï¼Œæ”¯æŒ `Avatar` é»˜è®¤æ‰€æœ‰å±æ€§ `AvatarProps`

| å‚æ•°     | ç±»å‹                               | è¯´æ˜                                                                                        | é»˜è®¤å€¼      |
| :------- | :--------------------------------- | :------------------------------------------------------------------------------------------ | :---------- |
| children | `string` æˆ–è€… `React.ReactElement` | <Highlight>å¯é€‰</Highlight> å­èŠ‚ç‚¹ï¼Œé€’å½’æŸ¥æ‰¾ `string` ç±»å‹çš„å­èŠ‚ç‚¹å¹¶æ˜¾ç¤º (`Emoji` å­—ç¬¦è§„èŒƒ) | -           |
| colorful | `boolean`                          | <Highlight>å¯é€‰</Highlight> æ˜¯å¦å¯ç”¨å¤šå½©æ˜¾ç¤ºï¼Œä»… `children` ä¸º `string` ç±»å‹æ—¶æœ‰æ•ˆ          | `false`     |
| mode     | `AvatarMode`                       | <Highlight>å¯é€‰</Highlight> æ–‡æœ¬æˆªå–æ¨¡å¼ï¼Œæšä¸¾                                              | `full_char` |

### AvatarMode

```ts
export enum AvatarMode {
  FirstChar = 'first_char',
  First2Char = 'first_2char',
  LastChar = 'last_char',
  Last2Char = 'last_2char',
  FullChar = 'full_char',
}
```

## æºä»£ç 

### æ–‡å­—å€’ç½®ä¿®å¤

ç»§æ‰¿ `Avatar` ç»„ä»¶ï¼Œè¦†ç›– `setScale` æ–¹æ³•ä¿®å¤æ–‡å­—ç¼©æ”¾å€’ç½®é—®é¢˜ã€‚

:::info è¯´æ˜
`AvatarP` ç»„ä»¶æ˜¯ä¸ºäº†ä¿®å¤æ–‡å­—ç¼©æ”¾å€’ç½®é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥ä½¿ç”¨ï¼Œ`AvatarPro` ä¸­å°±æ˜¯ä»¥ä¿®å¤è¿‡åçš„ `AvatarP` ä½œä¸ºåŸºç¡€ç»„ä»¶çš„ã€‚
:::

```tsx {22-25,29} showLineNumbers title=AvatarP.tsx
import { Avatar } from 'choerodon-ui';
import { findDOMNode } from 'react-dom';
import { AvatarProps } from 'choerodon-ui/lib/avatar';
import { AvatarContextValue } from 'choerodon-ui/lib/avatar/AvatarContext';

export default class AvatarP extends Avatar {
  constructor(props: AvatarProps, context: AvatarContextValue) {
    super(props, context);
    this.state = {
      scale: 0.99999, // é¿å…ç­‰äº1
      isImgExist: true,
    };
  }

  // è¦†ç›–åŸæ–¹æ³•ï¼šä¿®å¤å›¾åƒç¼©æ”¾é—®é¢˜
  setScale = () => {
    // eslint-disable-next-line react/no-find-dom-node
    const avatarNode = findDOMNode(this) as HTMLElement;
    if (avatarNode) {
      const childNode = avatarNode.firstChild as HTMLElement;

      const [avatarWidth, childWidth] = [
        avatarNode.offsetWidth || avatarNode?.getBoundingClientRect()?.width,
        childNode?.offsetWidth || childNode?.getBoundingClientRect()?.width,
      ];

      if (avatarWidth > 8 && avatarWidth - 8 < childWidth) {
        this.setState({
          scale: (avatarWidth - 8) / childWidth,
        });
      }
    } else {
      this.setState({ scale: 0.99999 });
    }
  };
}
```

### å¤šå½©æ–‡å­—å–è‰²é€»è¾‘

```js
const getAvatarColor = (text = '-') => {
  const charCode = text?.codePointAt(0) ?? 0;
  const index = charCode % colorPalette.length;
  return colorPalette[index];
};
```

## æ›´æ–°æ—¥å¿—

### 2023-05-21

- èˆå¼ƒ `pinyin` å–è¯åº“ï¼Œé‡‡ç”¨ `String.prototype.codePointAt()` å®ç°
- æ‰©å±• `children` ç±»å‹
- ä¼˜åŒ–éƒ¨åˆ†é€»è¾‘

### 2023-05-15

- æ–°å¢ `AvatarP` ç»„ä»¶ä¿®å¤åŸç»„ä»¶ç¼©æ”¾å¯¼è‡´çš„å€’ç½®é—®é¢˜ï¼›
- `children` ç±»å‹æ ¡éªŒè¾“å‡ºç”±é”™è¯¯è°ƒæ•´ä¸ºè­¦å‘Šï¼›
