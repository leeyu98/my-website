---
title: TransferPro
description: åŸºäº SelectBox ç»„ä»¶å°è£…çš„ç¬¦åˆç°è¡Œ UED è§„èŒƒçš„ç®€å•æ˜“ç”¨çš„ç©¿æ¢­æ¡†ç»„ä»¶ã€‚
sidebar_position: 10
tags:
  - Transfer
  - ç©¿æ¢­æ¡†
keywords:
  - TransferPro
---

<Author count={6000} publish="2023-04-18 23:35:00" update="2023-7-24 10:50" />

åŸºäº `SelectBox` ç»„ä»¶å°è£…çš„ç¬¦åˆç°è¡Œ `UED` è§„èŒƒçš„ç®€å•æ˜“ç”¨çš„ç©¿æ¢­æ¡†ç»„ä»¶ã€‚

![åŸºæœ¬ç”¨æ³•](./images/transfer-pro-base.png)

## ç‰¹æ€§è¯´æ˜

- æ”¯æŒå•é€‰ã€å¤šé€‰ï¼Œç®€å•æœç´¢
- æ”¯æŒ `lovCode/lookupCode` å€¼é›†é…ç½®
- æ”¯æŒæ•°æ®æ‰‹åŠ¨ã€è‡ªåŠ¨åŠ è½½
- æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“

## åŸºæœ¬ç”¨æ³•

```jsx {5,12} showLineNumbers
import { TransferPro } from 'hscs-common/components';

export default () => {
  const handleAssign = async ({ originalData, initialData, value, created, deleted }) => {
    console.log(originalData, initialData, value, created, deleted);
    // call save api
  };

  const handleOpen = () => {
    Modal.open({
      title: 'åˆ†é…',
      onOk: handleAssign,
      children: (
        <TransferPro
          titles={['æœªåˆ†é…ç§Ÿæˆ·', 'å·²åˆ†é…ç§Ÿæˆ·']}
          configProps={{
            primaryKey: 'tenantId',
            textField: 'tenantName',
            valueField: 'tenantNum',
            lovCode: 'HPFM.TENANT_PAGING',
            lovUrl: 'sql',
          }}
          targetProps={{
            primaryKey: 'assignTenantId',
            read: ({ data }) => {
              return {
                url: `${IPFM_API_PREFIX_BASE}/model-assigns`,
                method: 'GET',
                data: { ...data, modelId: record?.get('modelId') },
              };
            },
          }}
        />
      ),
    });
  };

  return (
    <Button funcType={FuncType.link} onClick={handleOpen}>
      åˆ†é…
    </Button>
  );
};
```

## API

| å‚æ•°        | ç±»å‹                                                                    | è¯´æ˜                                                                                                                                                                | é»˜è®¤å€¼                         |
| :---------- | :---------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------- |
| configProps | `ConfigProps`                                                           | <Highlight color="red">å¿…è¾“</Highlight> ç©¿æ¢­æ¡†æºä¸ç›®æ ‡æ•°æ®æº `DataSet` é…ç½®ï¼Œ[è¯¦ç»†](#configprops)                                                                   | -                              |
| targetProps | `TargetDSProps`                                                         | <Highlight color="red">å¿…è¾“</Highlight> ç›®æ ‡æ•°æ®æºè¡¥å……é…ç½®ï¼Œ[è¯¦ç»†](#targetprops)                                                                                    | -                              |
| searchable  | `boolean`                                                               | <Highlight>å¯é€‰</Highlight> æ˜¯å¦æ”¯æŒæœç´¢                                                                                                                            | `true`                         |
| titles      | `string[] æˆ– React.ReactNode[]`                                         | <Highlight>å¯é€‰</Highlight> å·¦å³ä¾§æ ‡é¢˜                                                                                                                              | `["å·²é€‰æ‹©","æœªé€‰æ‹©"]`          |
| header      | `React.ReactNode`                                                       | <Highlight>å¯é€‰</Highlight> é¡¶éƒ¨è‡ªå®šä¹‰æ¸²æŸ“                                                                                                                          | -                              |
| footer      | `React.ReactNode`                                                       | <Highlight>å¯é€‰</Highlight> åœ°æ­¥è‡ªå®šä¹‰æ¸²æŸ“                                                                                                                          | -                              |
| avatarProps | `AvatarProps`                                                           | <Highlight>å¯é€‰</Highlight> æ”¯æŒå¤´åƒç»„ä»¶æ‰€æœ‰å±æ€§                                                                                                                    | `{ size: 28, shape: "square"}` |
| className   | `string`                                                                | <Highlight>å¯é€‰</Highlight> è‡ªå®šä¹‰ç±»å                                                                                                                              | -                              |
| style       | `React.CSSProperties`                                                   | <Highlight>å¯é€‰</Highlight> è‡ªå®šä¹‰æ ·å¼                                                                                                                              | -                              |
| modal       | `any`                                                                   | <Highlight>å¯é€‰</Highlight> ä½¿ç”¨ `Modal.open` æ‰“å¼€å¼¹çª—ï¼Œé»˜è®¤ä¼šæ³¨å…¥è¯¥å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨å°†ç›®æ ‡æ•°æ®ç»“æœæ³¨å…¥åˆ° `onOk` å›è°ƒä¸­ï¼Œ[è¯¦ç»†](./transfer-pro-button#tmodalpropsonok) |                                |
| renderItem  | `(record: Record) => JSX.Element`                                       | <Highlight>å¯é€‰</Highlight> è‡ªå®šä¹‰ `Item` æ¸²æŸ“                                                                                                                      | -                              |
| onChange    | `({ records, value }: { records: Record[]; value: unknown[] }) => void` | <Highlight>å¯é€‰</Highlight> é€‰æ‹©æ•°æ®äº‹ä»¶å›è°ƒï¼šå•é€‰ã€å…¨é€‰ã€æ¸…ç©ºã€‚è¿”å›å½“å‰å˜æ›´çš„è®°å½•åŠé“å½“å‰å³ä¾§å·²é€‰æ‹©çš„æ‰€æœ‰æ•°æ®                                                      | -                              |

### ConfigProps

```ts
/**
 * @description lovCode,lookupCode,data ä¸ read å››é€‰ä¸€
 */
export type ConfigProps = {
  primaryKey: string;
  textField: string;
  valueField?: string;
} & (
  | { lovCode: string; lookupCode?: undefined; read?: undefined; data?: undefined }
  | { lovCode?: undefined; lookupCode: string; read?: undefined; data?: undefined }
  | { lovCode?: undefined; lookupCode?: undefined; read: TransportType; data?: undefined }
  | { lovCode?: undefined; lookupCode?: undefined; read?: undefined; data: any }
);
```

:::info æ³¨æ„
åŠ è½½æºæ•°æ®çš„æ–¹å¼<Emphasis>åªèƒ½ä¸”å¿…é¡»</Emphasis>é€‰æ‹© `lovCode` `lookupCode` `data` ä¸ `read` ä¸€ç§ï¼šå€¼é›† (åˆ—è¡¨) çš„é…ç½®æ›´ä¸ºç®€æ´ï¼Œ `read` é…ç½®æ›´ä¸ºçµæ´»ã€‚<br/>å¦‚æœä½¿ç”¨ `JS/JSX` å¯èƒ½ä¸ä¼šæœ‰ç±»å‹é”™è¯¯æç¤ºï¼ŒåŒæ—¶é…ç½®çš„è¯ `read` ä¼˜å…ˆçº§æ›´é«˜ã€‚
:::

| å‚æ•°       | ç±»å‹            | è¯´æ˜                                                                                                                                                                  | é»˜è®¤å€¼       |
| :--------- | :-------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------- |
| primaryKey | `string`        | <Highlight color="red">å¿…è¾“</Highlight> ä¸»é”®ï¼Œç”¨äºæ•°æ®æ ‡è¯†                                                                                                            | -            |
| textField  | `string`        | <Highlight color="red">å¿…è¾“</Highlight> ä½œä¸ºä¸»è¦å±•ç¤ºå­—æ®µ                                                                                                              | `textField`  |
| valueField | `string`        | <Highlight>å¯é€‰</Highlight> ä½œä¸ºæ¬¡è¦å±•ç¤ºå­—æ®µ                                                                                                                          | `valueField` |
| data       | `any`           | <Highlight>å¯é€‰</Highlight> ç”¨äºåˆå§‹åŒ–æºæ•°æ®                                                                                                                          | -            |
| lovCode    | `string`        | <Highlight>å¯é€‰</Highlight> å€¼é›†ç¼–ç ï¼Œç”¨äºåŠ è½½æºæ•°æ®                                                                                                                  | -            |
| lookupCode | `string`        | <Highlight>å¯é€‰</Highlight> å€¼åˆ—è¡¨ç¼–ç ï¼Œç”¨äºåŠ è½½æºæ•°æ®                                                                                                                | -            |
| read       | `TransportType` | <Highlight>å¯é€‰</Highlight> è¯¦ç»†é…ç½®å‚è§ [Transport](https://open.hand-china.com/choerodon-ui/zh/procmp/dataset/dataset#transport)ï¼Œä¼˜å…ˆçº§é«˜äº `lovCode` `lookupCode` | -            |

### TargetProps

:::info æ³¨æ„
åªæ¥å— 3 ä¸ªå‚æ•°ã€‚åŠ è½½ç›®æ ‡æ•°æ®çš„æ–¹å¼<Emphasis>åªèƒ½ä¸”å¿…é¡»</Emphasis>é€‰æ‹© `data` ä¸ `read` å…¶ä¸­ä¸€ç§ï¼š`data` çš„é…ç½®éœ€è¦æ‰‹åŠ¨è¯·æ±‚æ•°æ®ï¼Œ`read` é…ç½®ç»„ä»¶å†…éƒ¨è‡ªåŠ¨è¯·æ±‚æ•°æ®ã€‚åŒæ · `read` çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚

:::

```ts
/**
 * @description ç›®æ ‡æ•°æ®æº DS é…ç½® data ä¸ read äºŒé€‰ä¸€ä¸èƒ½å…±å­˜
 */
export type TargetProps = {
  primaryKey?: string; // ä»…ç”¨äºæ•°æ®ç­›é€‰, é»˜è®¤å€¼ä¸ ConfigProps.primaryKey ä¸€è‡´
} & ({ data?: undefined; read: TransportType } | { data: unknown[]; read?: undefined });
```

| å‚æ•°       | ç±»å‹            | è¯´æ˜                                       | é»˜è®¤å€¼                               |
| :--------- | :-------------- | :----------------------------------------- | :----------------------------------- |
| primaryKey | `string`        | <Highlight>å¯é€‰</Highlight> ä»…ç”¨äºæ•°æ®åŒ¹é… | é»˜è®¤ä¸ `ConfigProps.primaryKey` ä¸€è‡´ |
| data       | `Array<any>`    | <Highlight>å¯é€‰</Highlight> ç›®æ ‡æ•°æ®       | -                                    |
| read       | `TransportType` | <Highlight>å¯é€‰</Highlight> ç›®æ ‡æ•°æ®æºé…ç½® | -                                    |

:::caution æ³¨æ„
`ConfigProps` ä¸ `TargetProps` å¯¹è¿”å›æ•°æ®çš„è¦æ±‚ï¼š<br/>
`Array` æˆ–è€… `{ content: Array }`ï¼Œå…¶ä»–è¿”å›ç»“æœéœ€è¦é€šè¿‡é…ç½® `read.transformResponse` è‡ªè¡Œæ ¼å¼è½¬æ¢ã€‚
:::

## æ›´æ–°æ—¥å¿—

> æ³¨ï¼šç‰ˆæœ¬å·å¯¹åº” `hscs-front-common` ç‰ˆæœ¬

### 0.1.18 (2023-7-21)

- ğŸ ä¿®å¤ `ConfigProps` ä¸­ `read/data` å±æ€§é™åˆ¶ä¸å®Œå…¨é—®é¢˜

### 0.1.1

- ğŸ‰ `hscs-front-common@0.1.1` èµ·æ”¯æŒè¯¥ç»„ä»¶

### alpha

**2023-05-21**

- ğŸ ä¿®å¤ `lovCode/lookupCode` æŸ¥è¯¢é¡ºåºé—®é¢˜

**2023-05-16**

- ğŸ‰ æ–°å¢ `ConfigProps.data` æ”¯æŒæ‰‹åŠ¨åŠ è½½æºæ•°æ®
