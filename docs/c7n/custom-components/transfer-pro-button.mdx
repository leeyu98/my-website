---
title: TransferProButton
description: åŸºäº TransferPro å®ç°ï¼Œå†…ç½® Modal.open æ“ä½œçš„æ›´æ˜“ç”¨çš„ç©¿æ¢­å¼¹çª—ç»„ä»¶ã€‚
sidebar_position: 20
tags:
  - Transfer
  - ç©¿æ¢­æ¡†
keywords:
  - TransferProButton
---

<Author count={2200} publish="2023-05-13 00:51:00" update="2023-05-26 00:02:00" />

åŸºäº `TransferPro` å®ç°ï¼Œå°† `Modal.open` æ“ä½œå†…ç½®åˆ°ç»„ä»¶ä¸­ï¼Œæ¸²æŸ“ä¸º `Button` ç»„ä»¶ã€‚

![åŸºæœ¬ç”¨æ³•](./images/transfer-pro-button-base.png)

## ç‰¹æ€§è¯´æ˜

- æ”¯æŒ `TransferPro` æ‰€æœ‰ç‰¹æ€§
- å†…å»ºå¼¹çª—æ”¯æŒ

## åŸºæœ¬ç”¨æ³•

```tsx {5,15-17} showLineNumbers
import { TransferProButton } from 'hscs-common/components';

export default () => {
  const handleAssign = async ({ originalData, initialData, value, created, deleted }) => {
    console.log(originalData, initialData, value, created, deleted);
    // call save api
  };

  return (
    <TransferProButton
      buttonProps={{
        funcType: FuncType.link,
        disabled: true,
      }}
      modalProps={{
        onOk: handleAssign,
      }}
      titles={['æœªåˆ†é…ç§Ÿæˆ·', 'å·²åˆ†é…ç§Ÿæˆ·']}
      configProps={{
        primaryKey: 'tenantId',
        textField: 'tenantName',
        valueField: 'tenantNum',
        lovCode: 'HPFM.TENANT_PAGING',
        lovUrl: 'sql',
      }}
      targetProps={{
        primaryKey: 'assignTenantId',
        read: ({ data }) => {
          return {
            url: `${IPFM_API_PREFIX_BASE}/model-assigns`,
            method: 'GET',
            data: { ...data, modelId: record?.get('modelId') },
          };
        },
      }}
    >
      åˆ†é…
    </TransferProButton>
  );
};
```

## API

| å‚æ•°        | ç±»å‹               | è¯´æ˜                                                                                                                                                                                                       | é»˜è®¤å€¼ |
| :---------- | :----------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----- |
| buttonProps | `ButtonProps`      | <Highlight>å¯é€‰</Highlight> æŒ‰é’®å±æ€§ï¼Œé»˜è®¤ onClick æ˜¯æ‰“å¼€å¼¹çª—ï¼Œå¦‚æœä¼ å…¥ onClick äº‹ä»¶ï¼Œä¼šå…ˆæ‰§è¡Œ                                                                                                             | -      |
| modalProps  | `TModalProps`      | <Highlight>å¯é€‰</Highlight> åŸºäºå¼¹çª—å±æ€§ [ModalProps](https://open.hand-china.com/choerodon-ui/zh/procmp/feedback/modal#API)ï¼Œ`key` `children` é™¤å¤–ï¼Œ`onOk` äº‹ä»¶å›è°ƒä¸­ä¼šæ³¨å…¥å‚æ•°ï¼Œ[è¯¦ç»†](#tmodalpropsonok) | -      |
| å…¶ä»–        | `TransferProProps` | æ”¯æŒ `TransferProProps` æ‰€æœ‰å±æ€§ï¼Œè¯¦è§ [TransferProProps](/docs/c7n/custom-components/transfer-pro#api)                                                                                                    | -      |

### ButtonProps.onClick

ç»„ä»¶é»˜è®¤çš„ `onClick` äº‹ä»¶ä¼šæ‰“å¼€å¼¹çª—ï¼Œå¦‚æœåŒæ—¶æŒ‡å®šäº† `onClick` äº‹ä»¶å›è°ƒ(å¼‚æ­¥)ï¼Œåˆ™ä¼šå…ˆæ‰§è¡Œã€‚

### TModalProps.onOk

`onOk` å›è°ƒä¸­ä¼šæ³¨å…¥ä»¥ä¸‹å‚æ•°ï¼š

| å‚æ•°         | è¯´æ˜                                                                             |
| :----------- | :------------------------------------------------------------------------------- |
| originalData | <Highlight>æ•°ç»„</Highlight> åŸå§‹æ•°æ®ï¼Œç›®æ ‡æ•°æ®æºæ¥å£çš„è¿”å›æ•°æ®                   |
| initialData  | <Highlight>æ•°ç»„</Highlight> åˆå§‹åŒ–æ•°æ®ï¼Œç”± `originalData` ä¸æºæ•°æ®åŒ¹é…ä¹‹åçš„æ•°æ® |
| value        | <Highlight>æ•°ç»„</Highlight> å½“å‰å·²é€‰æ‹©çš„æ‰€æœ‰å€¼                                   |
| created      | <Highlight>æ•°ç»„</Highlight> `value` ä¸ `initialData` å¯¹æ¯”ï¼Œæ–°å¢çš„æ•°æ®            |
| deleted      | <Highlight>æ•°ç»„</Highlight> `value` ä¸ `initialData` å¯¹æ¯”ï¼Œåˆ é™¤çš„æ•°æ®            |

## Q & A

**1. æ€ä¹ˆç†è§£ `originalData` ä¸ `initialData`**

ç¤ºä¾‹ï¼šç°åœ¨å­˜åœ¨ä¸¤ä¸ªå®ä½“æ•™å¸ˆ (`Teacher`) å’Œæ•™å®¤ (`ClassRoom`)ï¼Œä¸¤è€…ä¹‹é—´å­˜åœ¨å¤šå¯¹å¤šçš„å…³ç³»ã€‚

```js
// å®ä¾‹
teacher1 = { tid: 't01', tName: 'Sir' };
teacher2 = { tid: 't02', tName: 'Madam' };
classRoom = { cid: 'c01', tName: 'Class A' };

// å‡è®¾å­˜åœ¨è¿™æ ·ä¸€æ¡åŒ¹é…å…³ç³»
relation = { tid: 't01', cid: 'c01' };
```

åœ¨ä¸ºæ•™å®¤åˆ†é…æ•™å¸ˆçš„æƒ…å†µä¸‹ï¼Œç©¿æ¢­æ¡†çš„æ•°æ®å°±æ˜¯æ•™å¸ˆï¼Œ`configProps` çš„é…ç½®ç”¨æ¥åŠ è½½æ‰€æœ‰æ•™å¸ˆæ•°æ®ï¼Œ`targetProps` é…ç½®ç”¨æ¥åŠ è½½å·²åŒ¹é…çš„å…³ç³»æ•°æ®ã€‚<br/>
`originalData` å°±æ˜¯è¿™é‡Œçš„åŒ¹é…å…³ç³»åŸå§‹æ•°æ®ï¼›`initialData` å°±æ˜¯ç”¨ `originalData` ä¸­çš„ä¸»é”® `tid` å»åŒ¹é…æ‰€æœ‰æ•™å¸ˆï¼Œå°†å·²åŒ…å«çš„æ•™å¸ˆæ•°æ®ä½œä¸ºç©¿æ¢­æ¡†ã€å·²é€‰æ•°æ®ã€‘ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºç©¿æ¢­æ¡†ã€æºæ•°æ®ã€‘

## æ›´æ–°æ—¥å¿—

### 0.1.1

- ğŸ‰ `hscs-front-common@0.1.1` èµ·æ”¯æŒè¯¥ç»„ä»¶
